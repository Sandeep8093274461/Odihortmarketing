(function($,window,document,undefined){'use strict';var pluginName,defaults,counter=0;pluginName='accTabs';defaults={defaultTab:0,callbackCreate:function(){},callbackDestroy:function(){},containerClass:'js-tabs',controlActiveClass:'js-tabs_control-item--active',controlsText:'Use the tab and enter or arrow keys to move between tabs',controlsTextClass:'js-tabs_control-text',tabControlsClass:'js-tabs_control',tabControlId:'js-tabs_control-item--',tabPanelClass:'js-tabs_panel',tabPanelId:'js-tabs_panel--'};function AccTabs(element,options){var self=this;self.element=$(element);self.options=$.extend({},defaults,options);function init(){self.controlsWrapper=$('<ul class="'+self.options.tabControlsClass+'" role="tablist" />');$('> div',self.element).each(function(index,value){var tabId=self.options.tabControlId+counter+index,panelId=self.options.tabPanelId+counter+index,heading=$($(value).prev()),headingContent=heading.html(),liMarkup=$('<li role="presentation">'+'<button aria-selected="false" data-controls="'+panelId+'" id="'+tabId+'" role="tab">'+headingContent+'</button>'+'</li>');heading.hide();$('button',liMarkup).click(createHandleClick(self)).keydown(createHandleKeyDown(self));self.controlsWrapper.append(liMarkup);});self.element.prepend(self.controlsWrapper);$('> div',self.element).each(function(index,value){$(value).addClass(self.options.tabPanelClass).attr({'aria-hidden':'true','aria-labelledby':self.options.tabControlId+counter+index,'id':self.options.tabPanelId+counter+index,'role':'tabpanel'}).hide();});self.controlsTextWrapper=$('<p class="'+self.options.controlsTextClass+'">'+self.options.controlsText+'</p>');self.element.prepend(self.controlsTextWrapper);self.activateTab($('button',self.controlsWrapper).eq(self.options.defaultTab));self.element.addClass(self.options.containerClass);counter++;self.options.callbackCreate();}
function createHandleClick(){self.handleClick=function(event){event.preventDefault();self.activateTab(this);};return self.handleClick;}
function createHandleKeyDown(){self.handleKeyDown=function(event){switch(event.which){case 37:case 38:event.preventDefault();if($(this).parent().prev().length!==0){$(this).parent().prev().find('> button').focus().click();}else{$(self.controlsWrapper).find('li:last > button').focus().click();}
break;case 39:case 40:event.preventDefault();if($(this).parent().next().length!==0){$(this).parent().next().find('> button').focus().click();}else{$(self.controlsWrapper).find('li:first > button').focus().click();}
break;}};return self.handleKeyDown;}
init();}
AccTabs.prototype.activateTab=function(tab){if($(tab).attr('aria-selected')==='false'){var activeTabClass=this.options.controlActiveClass,tabPanelId='#'+$(tab).attr('data-controls');if($('[aria-selected="true"]',this.controlsWrapper).length!==0){$('[aria-selected="true"]',this.controlsWrapper).attr('aria-selected','false').parent('li').removeClass(activeTabClass);$('> [aria-hidden="false"]',this.element).attr('aria-hidden','true').hide();}
$(tab,this.element).attr('aria-selected','true');$(tab,this.element).parent('li').addClass(activeTabClass);$(tabPanelId,this.element).attr('aria-hidden','false').show();}};AccTabs.prototype.rebuild=function(){return new AccTabs(this.element,this.options);};AccTabs.prototype.destroy=function(){var self=this;this.element.removeClass(this.options.containerClass);$('> .'+this.options.controlsTextClass,this.element).remove();$('> .'+this.options.tabControlsClass,this.element).remove();$('> div',this.element).prev().removeAttr('style');$('> div',this.element).each(function(index,value){$(value).removeAttr('aria-hidden aria-labelledby id role style').removeClass(self.options.tabPanelClass);});this.options.callbackDestroy();};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,'plugin_'+pluginName)){$.data(this,'plugin_'+pluginName,new AccTabs(this,options));}});};})(jQuery,window,document);